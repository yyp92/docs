# 动画：react-transition-group

[使用-掘金](https://juejin.cn/post/6844903869894524942 )

# 深入React合成事件机制原理

https://segmentfault.com/a/1190000039108951

[React 合成事件详解 - 掘金](https://juejin.cn/post/7005129812981317668)

由于fiber机制的特点，生成一个fiber节点时，它对应的dom节点有可能还未挂载，onClick这样的事件处理函数作为fiber节点的prop，也就不能直接被绑定到真实的DOM节点上。为此，React提供了一种 ***顶层注册，事件收集，统一触发*** 的事件机制。

### 原因

以上是React事件机制的简述，这套机制规避了无法将事件直接绑定到DOM节点上的问题，并且能够很好地利用fiber树的层级关系来生成事件执行路径，进而模拟事件捕获和冒泡，另外还带来两个非常重要的特性：

- 对事件进行归类，可以在事件产生的任务上包含不同的优先级
- 提供合成事件对象，抹平浏览器的兼容性差异

### 合成事件和原生事件的执行顺序

v17 之前，合成事件和原生事件的执行顺序与冒泡/捕获模式无关，原生事件恒早于合成事件；

v17 后，合成事件和原生事件的执行顺序与冒泡/捕获模式相关，冒泡模式，原生事件早于合成事件，捕获模式，合成事件早于原生事件。

# react 基本知识点

## 为什么不用this.state去更改状态？

React强烈不建议直接修改state，究其原因可以从两方面进行阐述

- 性能问题
  
  - React提倡不可变性，通过setstate()修改state实际上是创建了一个副本用来代替原来的state，这与直接修改原数据有着本质的区别。

- 机制
  要知道setState本质是通过一个队列机制实现state更新的。 执行setState时，会将需要更新的state合并后放入状态队列，而不会立刻更新state，队列机制可以批量更新state。
  如果不通过setState而直接修改this.state，那么这个state不会放入状态队列中，下次调用setState时对状态队列进行合并时，会忽略之前直接被修改的state，这样我们就无法合并了，而且实际也没有把你想要的state更新上去。