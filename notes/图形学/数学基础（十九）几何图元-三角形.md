# 几何图元 - 三角形

三角形在图形学中具有重要性的意义。复杂三维对象的表面与许多三角形近似。这样一组链接的三角形可形成一个三角形网格（Triangle Mesh），本章将介绍三角形基本属性，重点是重心坐标。

## 定义

定义一个三角形，只需要三个顶点即可，这些点的顺序至关重要，因为它们的顺序决定了三角面的正反，在右手系中，当从三角形正面看时，通常按逆时针方向枚举点（右手螺旋定则）。

![](../../\images\graphics-mathematics-basic-19-vector-1.jpg)

边矢量，边长 顶点定义如下：

$$
\vec{e_1} = {v_3} - {v_2}
$$

$$
\vec{e_2} = {v_1} - {v_3}
$$

$$
\vec{e_3} = {v_2} - {v_1}
$$

$$
l_1 = \lVert \vec{e_1} \rVert
$$

$$
l_2 = \lVert \vec{e_2} \rVert
$$

$$
l_3 = \lVert \vec{e_3} \rVert
$$

## 三角形面积

### 平行四边形

![](../../\images\graphics-mathematics-basic-19-vector-2.jpg)

由上图可知，平行四边形的面积等于底乘高，而三角形占据了平行四边形面积的一半，因此三角形面积为：

$$
A = \frac{base \cdot h}{2}
$$

### 海伦公式

求解三角形面积的第二种方式是海伦公式。

$$
s = \frac{l_1 + l_2 + l_3}{2} = \frac{p}{2}
$$

$$
A = \sqrt{s(s-l_1)(s-l_2)(s-l_3)}
$$

### 顶点坐标

一般来说,边的高度或长度不太好计算,因为所有的已知条件都是顶点的笛卡尔坐标(当然,我们总是可以通过坐标计算边长,但在有些情况下我们尽量避免这种相对昂贵的计算).接下来将介绍通过顶点坐标计算三角形面积的方法。

基本思想就是为三角形的每条边计算提醒的有符号面积，该面积由边和下方的x轴所界定。

![](../../\images\graphics-mathematics-basic-19-vector-3.jpg)

根据梯形面积公式：

$$
A = \frac{(上底 + 下底) \cdot 高}{2}
$$

则三角形三条边的面积公式分别为：

$$
A(e_1) = \frac{(y_2 + y_3)(x_2 - x_3)}{2}
$$

$$
A(e_2) = \frac{(y_3 + y_1)(x_3 - x_1)}{2}
$$

$$
A(e_3) = \frac{(y_2 + y_1)(x_2 - x_1)}{2}
$$

**可以通过对三个提醒的有符号面积求和，获得三角形本身的面积。实际上可以用这个思路求解任意多边形面积。**

$$
A = A(e_1) + A(e_2) + A(e_3) \\
= \frac{(y_2 + y_3)(x_2-x_3) + (y_3 + y_1)(x_3-x_1) + (y_2 + y_1)(x_2-x_1)}{2} \\
= \frac{y_1(x_3 - x_2) + y_2(x_1 - x_3) + y_3(x_1 - x_2)}{2}
$$

平移三角形不会改变三角形面积，因此我们可以将每个 $y$ 坐标减去 $y_3$ ,进一步做简化：

$$
A = \frac{(y_1 - y_3)(x_3 - x_2) + (y_2 - y_3)(x_1 - x_3) + (y_3 - y_3)(x_1 - x_2)}{2} \\
= \frac{(y_1 - y_3)(x_3 - x_2) + (y_2 - y_3)(x_1 - x_3)}{2}
$$

### 叉积

三维中可以使用叉积计算三角形的面积，根据叉积的定义，两个矢量的叉积的大小等于通过矢量两条边形成的平行四边形的面积。由于三角形的面积是平行四边形面积的一半，因此：

$$
A = \frac{\lVert \vec{e_1} \times \vec{e_2} \rVert}{2}
$$

## 参考

[《3D数学基础》图形和游戏开发(第二版)](https://item.jd.com/12659881.html)
