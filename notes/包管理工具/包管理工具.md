# nvm ï¼ˆnodeç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼‰

## nvm

[github](https://github.com/nvm-sh/nvm)

```bash
# ä½¿ç”¨ç³»ç»Ÿä¸‹è½½çš„nodeç‰ˆæœ¬
nvm use system

# ä½¿ç”¨å…·ä½“çš„ç‰ˆæœ¬å·
nvm use <version>

# ä¸‹è½½å…·ä½“çš„ç‰ˆæœ¬å·
nvm install <version>

# æŸ¥çœ‹nvmåˆ—è¡¨
nvm ls

# è®¾ç½®nodeé»˜è®¤ç‰ˆæœ¬
nvm alias default <version>
```

## tnvm (ä¸éœ€è¦ç¿»å¢™)

https://github.com/aliyun-node/tnvm

https://github.com/aliyun-node/tnvm/issues/38

```bash
curl https://raw.githubusercontent.com/aliyun-node/tnvm/master/install.sh | bash

~/.bash_profile æˆ– ~/.profile

source ~/.bash_profile
# é‡æ–°å¯åŠ¨iterm
```

# npmã€yarnã€pnpm nodeåŒ…ç®¡ç†å·¥å…·

## npm

å…¨ç§°Node Package Manager

### ä½¿ç”¨ï¼š

```bash
# æŸ¥çœ‹ npm çš„ç‰ˆæœ¬ 
npm -v

# æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ç®€å•ç”¨æ³•
npm -l

# æŸ¥çœ‹ npm å‘½ä»¤åˆ—è¡¨
npm help

# æŸ¥çœ‹ npm çš„é…ç½®
npm config list -l
# æŸ¥çœ‹å½“å‰æº
npm config get registry
# åˆ‡æ¢npmæº
npm config set registry <npmæº>

# åˆ›å»ºæ¨¡å— (åˆå§‹åŒ–ç”Ÿæˆä¸€ä¸ªæ–°çš„package.jsonæ–‡ä»¶)
# å°¾ç¼€å¸¦-fï¼ˆä»£è¡¨forceï¼‰ã€-yï¼ˆä»£è¡¨yesï¼‰ï¼Œåˆ™è·³è¿‡æé—®é˜¶æ®µï¼Œç›´æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„package.jsonæ–‡ä»¶ï¼Œä¸å¸¦å°¾ç¼€çš„è¯ï¼Œé»˜è®¤æœ‰æé—®é˜¶æ®µã€‚
npm init 

# è®¾ç½®ç¯å¢ƒå˜é‡
npm set
# ğŸŒ°
npm set int-author-name 'my name jerry'
set init-author-email '12345@qq.com'
set init-author-url 'http://yourdomain.com'
npm set init-license 'MIT'
# æ‰§è¡Œäº†ä»¥ä¸Šçš„ä¿®æ”¹ï¼Œæ­¤æ—¶ Package.jsonå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–
# npm init è®¾ç½®åæ‰§è¡Œinitæ‰æ˜¯çœŸæ­£ä¿®æ”¹æˆåŠŸ

# æœç´¢æ¨¡å—(npm searchå‘½ä»¤ç”¨äºæœç´¢npmä»“åº“ï¼Œå®ƒåé¢å¯ä»¥è·Ÿå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è·Ÿæ­£åˆ™è¡¨è¾¾å¼)
npm search <æœç´¢è¯> [-g]


# npm list æŸ¥çœ‹æ¨¡å—
# å½“å‰é¡¹ç›®å®‰è£…çš„æ‰€æœ‰æ¨¡å—
npm list
# åˆ—å‡ºå…¨å±€å®‰è£…çš„æ¨¡å— å¸¦ä¸Š[--depth 0] ä¸æ·±å…¥åˆ°åŒ…çš„æ”¯ç‚¹ æ›´ç®€æ´
npm list -g --depth 0


# npm install å®‰è£…æ¨¡å—
# è¯»å–package.jsoné‡Œé¢çš„é…ç½®å•å®‰è£…  
npm install æˆ–è€… npm i

# é»˜è®¤å®‰è£…æŒ‡å®šæ¨¡å—çš„æœ€æ–°(@latest)ç‰ˆæœ¬
npm install [<@scope>/]<name> 
# eg:npm install gulp

# å®‰è£…æŒ‡å®šæ¨¡å—çš„æŒ‡å®šç‰ˆæœ¬
npm install [<@scope>/]<name>@<version>
# eg: npm install gulp@3.9.1

# å®‰è£…æŒ‡å®šæŒ‡å®šç‰ˆæœ¬èŒƒå›´å†…çš„æ¨¡å—
npm install [<@scope>/]<name>@<version range>
# eg: npm install vue@">=1.0.28 < 2.0.0"

# å®‰è£…æŒ‡å®šæ¨¡å—çš„æŒ‡å®šæ ‡ç­¾ é»˜è®¤å€¼ä¸º(@latest)
npm install [<@scope>/]<name>@<tag>
# eg:npm install sax@0.1.1

# é€šè¿‡Githubä»£ç åº“åœ°å€å®‰è£…
npm install <tarball url>
# eg:npm install git://github.com/package/path.git


# é…ç½®é€‰é¡¹è¯´æ˜:
# å…¨å±€å®‰è£… -g | -global 
# eg: npm i -g gulp æˆ–è€… npm i gulp -g
# è¿™æ˜¯é»˜è®¤è®¾ç½®ï¼Œé™¤é-Dæˆ–-Oå­˜åœ¨ #å®‰è£…å¹¶å°†è¢«æ·»åŠ åˆ°package.jsonçš„dependenciesåŒº

# -P | --save-prod ï¼ˆç”Ÿäº§é˜¶æ®µçš„ä¾èµ–ï¼‰

# å®‰è£…å¹¶å°†è¢«æ·»åŠ åˆ°package.jsonçš„dependenciesåŒº -S | --save 
# eg: npm i gulp --save æˆ– npm i gulp -S ï¼ˆå¼€å‘é˜¶æ®µçš„ä¾èµ–ï¼‰

# å®‰è£…å¹¶å°†è¢«æ·»åŠ åˆ°package.jsonçš„devDependenciesåŒºã€‚ -D | --save-dev 
# npm i gulp --save-dev æˆ– npm i gulp -D ï¼ˆå¯é€‰é˜¶æ®µçš„ä¾èµ–ï¼‰

# å®‰è£…å¹¶å°†è¢«æ·»åŠ åˆ°package.jsonçš„optionalDependenciesåŒº -O | --save-optional

# å®‰è£…æ¨¡å—çš„ç¡®åˆ‡ç‰ˆï¼Œè€Œä¸æ˜¯ä½¿ç”¨npmçš„é»˜è®¤semver rangeè¿ç®—ç¬¦ -E | --save-exact
# npm i gulp --save-exact æˆ– npm i gulp -E

# å®‰è£…å¹¶å°†è¢«æ·»åŠ åˆ°`bundleDependencies`åˆ—è¡¨ä¸­ -B | --save-bundle

# æ¨¡å—ä¸ç®¡æ˜¯å¦å®‰è£…è¿‡ï¼Œnpm éƒ½è¦å¼ºåˆ¶é‡æ–°å®‰è£… -f|--force 
# eg:npm install sax --force 

# è¡¥å……ï¼šæ‰€æœ‰æ¨¡å—éƒ½è¦å¼ºåˆ¶é‡æ–°å®‰è£…ï¼Œé‚£å°±åˆ é™¤`node_modules`ï¼Œé‡æ–°æ‰§è¡Œ`npm install` 
# åˆ é™¤node_modulesï¼šrm -rf node_modules æˆ–è€…æ‰‹åŠ¨å»åˆ é™¤node_modulesç›®å½•ï¼Œnpm install 
# é˜²æ­¢ä¿å­˜åˆ°`dependencies` --no-save 
# æŠ¥å‘Šå®‰è£…çŠ¶å†µè€Œä¸æ˜¯çœŸçš„å®‰è£… --dry-run


# npm uninstall å¸è½½æ¨¡å—
# å¸è½½å½“å‰é¡¹ç›®æˆ–å…¨å±€æ¨¡å— 
npm uninstall <name> [-g] 
# eg: npm uninstall gulp --save-dev  
# å¸è½½åï¼Œä½ å¯ä»¥åˆ° /node\_modules/ ç›®å½•ä¸‹æŸ¥çœ‹åŒ…æ˜¯å¦è¿˜å­˜åœ¨ï¼Œ
# æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼šnpm ls æŸ¥çœ‹å®‰è£…çš„æ¨¡å—


# npm update æ›´æ–°æ¨¡å—
# å‡çº§å½“å‰é¡¹ç›®æˆ–å…¨å±€çš„æŒ‡å®šæ¨¡å—
npm update <name> [-g] 
# eg: npm update express æˆ– npm update express -g


# npm link å¼•ç”¨æ¨¡å—ï¼ˆç”¨çš„å°‘ï¼‰
# å¼•ç”¨ä¾èµ– æœ‰äº›åŒ…æ˜¯å…¨å±€å®‰è£…äº†ï¼Œåœ¨é¡¹ç›®é‡Œé¢åªéœ€è¦å¼•ç”¨å³å¯ã€‚
npm link [<@scope>/]<pkg>[@<version>]
# eg: å¼•ç”¨   npm link gulp gulp-ssh gulp-ftp
# eg: è§£é™¤å¼•ç”¨ npm unlink gulp


# npm run æ‰§è¡Œè„šæœ¬
# package.jsonçš„scriptså­—æ®µï¼Œå¯ä»¥ç”¨äºæŒ‡å®šè„šæœ¬å‘½ä»¤ï¼Œä¾›npmç›´æ¥è°ƒç”¨ã€‚npm runä¼šåˆ›å»ºä¸€ä¸ªShellï¼Œæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚
# å…·ä½“çš„æœ‰å¾…è¡¥å……


# npm publish å‘å¸ƒæ¨¡å—
# æœªæ³¨å†Œ ç”³è¯·æ³¨å†Œä¸€ä¸ªç”¨æˆ· ç›´æ¥åœ¨https://www.npmjs.com/æ³¨å†Œä¸€æ ·
npm adduser
# æ‰§è¡Œå å¡«å†™å‡ ä¸ªé—®é¢˜ Usernameã€Passwordã€Email

#å·²æ³¨å†Œ
npm login 

#å‘å¸ƒ
npm publish

# æŸ¥çœ‹åŒ…çš„ç‰ˆæœ¬
npm view <åŒ…> versions
```

## yarn

Yarn æ˜¯ Facebook, Google, Exponent å’Œ Tilde å¼€å‘çš„ä¸€æ¬¾æ–°çš„ JavaScript åŒ…ç®¡ç†å·¥å…·ã€‚

### ä½¿ç”¨ï¼š

```bash
# å®‰è£…
npm install -g yarn

# æŸ¥çœ‹å…¨å±€å®‰è£…è·¯å¾„
yarn global dir

# æ£€æŸ¥ç‰ˆæœ¬å·
yarn --version

# å®‰è£…package.jsoné‡Œçš„åŒ…ä¾èµ–ï¼Œå¹¶å°†åŒ…åŠå®ƒçš„æ‰€æœ‰ä¾èµ–é¡¹ä¿å­˜è¿›yarn.lock
# å®‰è£…æ‰€æœ‰ä¾èµ–
yarn æˆ– yarn install
# å®‰è£…ä¸€ä¸ªåŒ…çš„å•ä¸€ç‰ˆæœ¬
yarn install --flat
# å¼ºåˆ¶é‡æ–°ä¸‹è½½æ‰€æœ‰åŒ…
yarn install --force
# åªå®‰è£…ç”Ÿäº§ç¯å¢ƒä¾èµ–
yarn install --production


# åˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®
yarn init

# æ·»åŠ ä¾èµ–åŒ…
yarn add [package]
yarn add [package]@[version]
yarn add [package]@[tag]

# å°†ä¾èµ–é¡¹æ·»åŠ åˆ°ä¸åŒä¾èµ–é¡¹ç±»åˆ«ä¸­
# dependenciesã€devDependenciesã€peerDependencies å’Œ optionalDependencies
yarn add [package] --save
yarn add [package] --dev
yarn add [package] --peer
yarn add [package] --optional

# å‡çº§ä¾èµ–åŒ…
yarn upgrade [package]
yarn upgrade [package]@[version]
yarn upgrade [package]@[tag]

# ç§»é™¤ä¾èµ–åŒ…
yarn remove [package]

# å‘å¸ƒåŒ…
yarn publish

# è¿è¡Œè„šæœ¬ (ç”¨æ¥æ‰§è¡Œåœ¨ package.json ä¸­ scripts å±æ€§ä¸‹å®šä¹‰çš„è„šæœ¬)
yarn run 

# æ˜¾ç¤ºæŸä¸ªåŒ…çš„ä¿¡æ¯
yarn info [package]  // å¯ä»¥ç”¨æ¥æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯

# ç¼“å­˜
yarn cache
yarn cache list // åˆ—å‡ºå·²ç¼“å­˜çš„æ¯ä¸ªåŒ…
yarn cache dir // è¿”å›å…¨å±€ç¼“å­˜ä½ç½®
yarn cache clean // æ¸…é™¤ç¼“å­˜

# åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…
# å‘½ä»¤é€šè¿‡å¼•ç”¨æ‰€æœ‰åŒ…ç®¡ç†å™¨å…ƒæ•°æ®æ–‡ä»¶åˆ—å‡ºå½“å‰å·¥ä½œç›®å½•çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå…¶ä¸­åŒ…æ‹¬é¡¹ç›®çš„ä¾èµ–é¡¹
yarn list
# é™åˆ¶ä¾èµ–é¡¹çš„æ·±åº¦/è¿‡æ¨¡å¼æ ‡å¿—è¿‡æ»¤ä¾èµ–é¡¹åˆ—è¡¨
yarn list [--depth] [--pattern]
```

### é—®é¢˜ï¼š

1. åœ¨iterm2ä¸­æ— æ³•ä¸‹åŒ…é—®é¢˜
   
   èµ„æ–™ï¼šhttps://juejin.cn/post/6844903953675583496

```bash
# æ·»åŠ ä¸€ä¸‹é…ç½®ï¼Œå°±èƒ½ä½¿ç”¨yarnä¸‹è½½åŒ…
open -e ~/.zshrc

export PATH = "$PATH:`yarn global bin`"
```

## pnpm

### èµ„æ–™

[å®˜ç½‘](https://pnpm.js.org/en/)

### å›¾è°±

![](../../imgs/package-pnpm.png)

### å‘½ä»¤

```bash
# å…¨å±€å®‰è£…
npm install pnpm -g

# è®¾ç½®æº
# æŸ¥çœ‹æº
pnpm config get registry
# åˆ‡æ¢æ·˜å®æº
pnpm config set registry http://registry.npm.taobao.org

# ä½¿ç”¨
# å®‰è£…åŒ…
pnpm install æˆ– pnpm i
# -S é»˜è®¤å†™å…¥dependencies
pnpm add <åŒ…å>
# -D é»˜è®¤å†™å…¥devDependencies
pnpm add -D <åŒ…å>
# å…¨å±€å®‰è£…
pnpm add -g

# ç§»é™¤
# ç§»é™¤åŒ…
pnpm remove <åŒ…>
# ç§»é™¤å…¨å±€åŒ…
pnpm remove <åŒ…> --global

# æ›´æ–°
# æ›´æ–°æ‰€æœ‰
pnpm up
# æ›´æ–°å…·ä½“çš„åŒ…
pnpm upgrade <åŒ…>
# æ›´æ–°å…¨å±€çš„åŒ…
pnpm upgrade <åŒ…> --global

# è®¾ç½®å‚¨å­˜è·¯å¾„
pnpm config set store-dir /path/to/.pnpm-store
```

# nrm

nrm(npm registry manager )æ˜¯npmçš„é•œåƒæºç®¡ç†å·¥å…·ï¼Œå¯ç”¨æ¥å¿«é€Ÿçš„åˆ‡æ¢npmæºã€‚

.npmrc  => æ¥ä¹‹æŒ‡å®šnpmæºã€‚

```bash
# install nrm
npm install -g nrm


# ä½¿ç”¨
# æŸ¥çœ‹å¯ä½¿ç”¨é•œåƒæº
#   npm -------- https://registry.npmjs.org/
#   yarn ------- https://registry.yarnpkg.com/
#   cnpm ------- http://r.cnpmjs.org/
# * taobao ----- https://registry.npm.taobao.org/
#   nj --------- https://registry.nodejitsu.com/
#   npmMirror -- https://skimdb.npmjs.com/registry/
#   edunpm ----- http://registry.enpmjs.org/
nrm ls

# åˆ‡æ¢é•œåƒæº
nrm use <url>

# æ·»åŠ ç§æœ‰ä»“åº“é“¾æ¥
# ç§æœ‰ä»“åº“é“¾æ¥
nrm add name http://registry.npm.tree.com/
# ä½¿ç”¨æœ¬å€çš„é•œåƒåœ°å€ 
nrm use name
```

## verdaccio (npm ç§æœ)

verdaccio æ˜¯ä¸€ä¸ªç®€å•ã€é›¶é…ç½®çš„æœ¬åœ°ç§æœ‰åŒ–npmä»“åº“ã€‚

### èµ„æ–™

[å®˜ç½‘](https://verdaccio.org/zh-cn/)

### å‘½ä»¤

```bash
# å®‰è£…
npm install verdaccio -g

# åˆ›å»ºç”¨æˆ·ï¼ˆè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ï¼‰
npm adduser --registry http://localhost:4873/

# è´¦æˆ·
admin/admin qqé‚®ç®±
```

### å¯åŠ¨ç»“æœ

```js
// å¯åŠ¨
verdaccio

info --- Creating default config file in /Users/.config/verdaccio/config.yaml
// åˆ›å»ºé…ç½®æ–‡ä»¶
warn --- config file  - /Users/.config/verdaccio/config.yaml

// æ’ä»¶å¯åŠ¨
warn --- Plugin successfully loaded: verdaccio-htpasswd
warn --- Plugin successfully loaded: verdaccio-audit

// å¯åŠ¨ http æœåŠ¡å™¨
warn --- http address - http://localhost:4873/ - verdaccio/5.1.3
```
